<div class="page-width image-text-blogger">  
  {% if section.settings.heading != blank or section.settings.subtitle != blank %}
  <div class="section-header header-title-wrapper">
    {% if section.settings.heading != blank %}
    <h5 class="sub-title header--main-heading">{{ section.settings.heading | escape }}</h5>
    {% endif %}
    {% if section.settings.subtitle != blank %}
    <h2 class="title header--sub-heading">{{ section.settings.subtitle | escape }}</h2>
    {% endif %}
  </div>
  {% endif %}
  <div class="feature-row__text" data-slick="{{section.blocks.size}}" {% if section.blocks.size > 1 %} data-init-happy{% endif %}>
    {% for block in section.blocks %}
    <div class="grid__item--{{ block.id }} txt-img-block">
      {% if block.settings.image != blank %}
      {%- assign img_url = block.settings.image | img_url: 'master' -%}
      <div class="feature-row__image-wrapper">
        <img class="lazyload" data-src="{{ img_url }}"
        data-widths="[180, 360, 540, 720, 900, 1080, 1296, 1512, 1728, 2048]"
        data-aspectratio="{{ block.settings.image.aspect_ratio }}"
        data-sizes="auto"
        alt="{{ block.settings.image.alt | escape }}">
      </div>
      {% endif %}
      <div class="text-block">
        {% if block.settings.name != blank %}<p class="name">{{ block.settings.name }}</p>{% endif %}
        {% if block.settings.title != blank %}<p class="profession">{{ block.settings.title }}</p>{% endif %}
      </div>
    </div>
    {% endfor %}
  </div>
</div>

<script>
  $(document).ready(function() {
    var dslick = $('[data-init-happy]');
    if(dslick.length) {
      dslick.slick({
        dots: true,
        arrows: true,
        prevArrow:"<button type='button' class='slick-arrow slick-prev'>Previous</button>",
        nextArrow:"<button type='button' class='slick-arrow slick-next'>Next</button>",
        speed: 500,
        slidesToShow:2,
        slidesToScroll:1,
        autoplay: true,
        centerMode: true,
        responsive: [{ 
          breakpoint: 1023,
          settings: {
            arrows: false,
            slidesToShow: 1,
            slidesToScroll: 1
          } 
        }]
      });
    }
  });
</script>


{% schema %}
{
  "name": "Happy Customers",
  "class": "index-section happy_customers",
  "settings": [
  {
    "type": "text",
    "id": "heading",
    "label": "Heading",
    "default": "Our happy Customers"
  },
  {
    "type": "text",
    "id": "subtitle",
    "label": "Sub Heading",
    "default": "Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquy."
  }
  ],
  "blocks": [
  {
    "type": "text_block",
    "name": "Text Block",
    "settings": [
    {
      "type": "image_picker",
      "id": "image",
      "label": {
        "da": "Billede",
        "de": "Foto",
        "en": "Image",
        "es": "Imagen",
        "fi": "Kuva",
        "fr": "Image",
        "hi": "इमेज",
        "it": "Immagine",
        "ja": "画像",
        "ko": "이미지",
        "nb": "Bilde",
        "nl": "Afbeelding",
        "pt-BR": "Imagem",
        "pt-PT": "Imagem",
        "sv": "Bild",
        "th": "รูปภาพ",
        "zh-CN": "图片",
        "zh-TW": "圖片"
      }
    },
    {
      "type": "text",
      "id": "name",
      "label": "Name"
    },
    {
      "type": "richtext",
      "id": "title",
      "label": "Text"
    }
    ]
  }
  ]
}
{% endschema %}
